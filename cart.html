<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Page | Bath & Body Works</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@200&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> 
    <link rel="stylesheet" href="stylescart.css">
    <script src="https://kit.fontawesome.com/629044acfa.js" crossorigin="anonymous"></script>
    <link rel="icon" href= "https://assets.giftcash.com/images/cards/bxQNcSqzbX8ws07PjzefYIMHouiM0FQ9Kf60X4OI.png">
  
</head>
<body>
    <div id="headtop">
        <div id="topt1">
            <img src="https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1d0/on/demandware.static/Sites-BathAndBodyWorks-Site/-/default/dw5c22b8c2/images/svg-icons/Logos-main.svg?yocs=q_s_"> 
        </div>
        <div id="nav">
            <span>NEW ARRIVALS</span>
            <span>AROMATHERAPHY SHOP</span>
            <span>MEN'S SHOP</span>
            <span>WOMEN'S SHOP</span>
            <span>SHOP BY FRAGRANCE</span>
        </div>
    </div>
    <div id="line">
    </div>
    <div id="containerhead">
        <h3 class="ll1">ITEM</h3>
        <h3 class="rr1">PRICE</h3>
        <h3 class="ll1">QUANTITY</h3>
        <h3 class="rr1">TOTAL PRICE</h3>
    </div>
    <div id="container">
        <div id="productdisplay">
            <img src="https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1cf/dw/image/v2/BBDL_PRD/on/demandware.static/-/Sites-master-catalog/default/dw65c687f7/crop/026199993_crop.jpg?sw=500&sh=600&sm=fit&q=75&yocs=q_s_">
            <div id="protext">
                <h4>Marble</h4>
                <p>Cologne </p>
                <p id="redtext">Mix & Match: Buy 3, Get 1 Free</p>
                <span id="heart" class="fas fa-heart"></span><span> Add to Whish List</span>
            </div>
        </div>
    </div>
    <div id="foot1">
        <div id="form">
            <form>
                <p> Get email offers & the latest news from Bath & Body Works!</p>
                <p>Enter Email</p>
                <input type="email" placeholder="Enter Email">
                <p>Confirm Email</p>
                <input type="email" placeholder="Enter Email">
                <input id="submit" type="submit" value="submit">
            </form>
            <h4>Get Connected</h4>
            <div id="socialMedia">
                <a href="https://www.facebook.com/bathandbodyworks"><span class="fab fa-facebook" id="fb"></span></a>
                <a href="https://www.instagram.com/bathandbodyworks/"><span class="fab fa-instagram-square" id="fb"></span></a>
                <a href="https://twitter.com/bathbodyworks"><span class="fab fa-twitter-square" id="fb"></span></a>
                <a href="https://www.youtube.com/user/bathandbodyworks"><span class="fab fa-youtube" id="youtube"></span></a>
                <a href="https://www.pinterest.com/bathbodyworks/"><span class="fab fa-pinterest" id="youtube"></span></a>
            </div>
        </div>
        <div id="logo"><img id="logoimg" src="https://cdn-fsly.yottaa.net/5d669b394f1bbf7cb77826ae/www.bathandbodyworks.com/v~4b.1cf/on/demandware.static/-/Sites-BathAndBodyWorks-Library/default/dw0c8e6af7/images/evergreen/Happiness_Guaranteedtimes2_v2.jpg?yocs=q_s_"></div>
       <div id="contact">
            <div id="form">
                <h4>MY ACCOUNT</h4>
                <p class="p1">Sign-In</p>
                <p class="p1">Sign-Up</p>
                <p class="p1">My Auto Refresh</p>
                <p class="p1">My Love-It</p>
            </div>
            <div id="form">
                <h4>PRODUCTS</h4>
                <p class="p1">Mens's Page</p>
                <p class="p1">Womens's Page</p>
                <p class="p1">New Arrivals </p>
                <p class="p1">Aromatherapy Shop</p>
                <p class="p1">Shop By Fragrance </p>
            </div>
        </div>
    </div>
    <div id="foot2">
        <div id="footdiv">
            <P>Â© 2022 Bath & Body Works Direct, Inc. </P>
            <p>Cloned By fw15</p>
        </div>
    </div>
</body>
</html>

<script>
    
    localStorage.setItem("Data", JSON.stringify(data));
    var mensData = JSON.parse(localStorage.getItem("Data")); 

    document.querySelector("#qty").textContent= data.length+" items";

    var cartArray = JSON.parse(localStorage.getItem("cartItems")) || [];

    createProduct(mensData);
  
    function createProduct(mensData) {
        document.querySelector("#container").innerHTML = "";

        mensData.map(function (ele) {

            var pro = document.createElement("div");
            pro.setAttribute("class", "product");
            
            var top = document.createElement("div");
            top.setAttribute("id", "top");

            var img = document.createElement("img");
            img.setAttribute("src", ele.img);

            top.append(img);

            var bot1 = document.createElement("div");
            bot1.setAttribute("id", "bottom");

            var h3 = document.createElement("h3");
            h3.textContent = ele.name;

            var p1 = document.createElement("p");
            p1.setAttribute("id", "disc");
            p1.textContent = ele.disc;

            var sttext = document.createElement("div");
            sttext.setAttribute("id", "stText"); 

            var h3_2 = document.createElement("h3");
            h3_2.setAttribute("id", "strike");
            h3_2.textContent = ele.strikeoff;

            var h3_3 = document.createElement("h3");
            h3_3.setAttribute("id", "rate");
            h3_3.textContent = ele.rate;

            sttext.append(h3_2, h3_3);

            var p2 = document.createElement("p");
            p2.textContent = ele.p1;

            bot1.append(h3, p1, sttext, p2);

            var bot2 = document.createElement("div");
            bot2.setAttribute("id", "bottom2");

            var imp = document.createElement("input")
            imp.setAttribute("type", "button");
            imp.setAttribute("id", "button");
            imp.value="ADD TO BAG";

            imp.addEventListener("click", function() {
                addTOCart(ele);
            });

            var str = document.createElement("div");
            str.setAttribute("class", "star");

            for(var i = 1; i <= 5; i++) {
                var sp = document.createElement("span");
                sp.setAttribute("id", i+"one");
                sp.setAttribute("class", "fa fa-star fa-3x");
                sp.setAttribute("onclick", "starmark(this)");
                str.append(sp);
            }
            
            bot2.append(imp, str);

            pro.append(top, bot1, bot2);

            document.querySelector("#container").append(pro);
        });
    }

    function addTOCart(ele) {
        cartArray.push(ele);
        console.log(cartArray);
        localStorage.setItem("cartItems", JSON.stringify(cartArray));
        alert("added to cart");
    }
    
    function starmark(item) {
        var count=item.id[0];
        var subid= item.id.substring(1);
            for(var i=0;i<5;i++) {
                if(i<count) {
                    document.getElementById((i+1)+subid).setAttribute("class", "fa fa-star fa-3x checked");
                }
            }
    }

    function sort() {
        var val = document.querySelector("#sorttag").value;
        
         if (val == "Low To High") {
            data.sort(function (a, b) {
                return Number(a.rate.substring(5)) - Number(b.rate.substring(5));
            });
            createProduct(data);
        }
        else if (val == "High To Low") {
            data.sort(function (a, b) {
                return Number(b.rate.substring(5)) - Number(a.rate.substring(5));
            });
            createProduct(data);
        } else {
            createProduct(mensData);
            document.querySelector("#qty").textContent= mensData.length+" items";
        }
    }

    function smell(){
        var val = document.querySelector("#smellTag").value;

        if (val == "FRESH") {
            var arr = data.filter(function (ele) {
                return ele.smell == "FRESH";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        } 
        if (val == "FRUITY") {
            var arr = data.filter(function (ele) {
                return ele.smell == "FRUITY";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        } 
        if (val == "SWEET") {
            var arr = data.filter(function (ele) {
                return ele.smell == "SWEET";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        }
        if (val == "WOODY") {
            var arr = data.filter(function (ele) {
                return ele.smell == "WOODY";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        }
    }

    function offer(){
        var val = document.querySelector("#offerTag").value;

        if (val == "OFFER") {
            var arr = data.filter(function (ele) {
                return ele.p1 !== "";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        } 
        if (val == "REGULAR") {
            var arr = data.filter(function (ele) {
                return ele.p1 == "";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        } 
    }

    function typeT(){
        var val = document.querySelector("#typeTag").value;

        if (val == "BODY CREAM") {
            var arr = data.filter(function (ele) {
                return ele.type == "BODY CREAM" || ele.type == "ALL";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        } 
        if (val == "BODY LOTION") {
            var arr = data.filter(function (ele) {
                return ele.type == "BODY LOTION" || ele.type == "ALL";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        } 
        if (val == "BODY SPRAY") {
            var arr = data.filter(function (ele) {
                return ele.type == "BODY SPRAY" || ele.type == "ALL";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        }
        if (val == "BODY SOAP") {
            var arr = data.filter(function (ele) {
                return ele.type == "BODY SOAP" || ele.type == "ALL";
            });
            createProduct(arr);
            document.querySelector("#qty").textContent= arr.length+" items";
        }
    }

    document.querySelector("#search + span").addEventListener("click", search);

    function search() {
        var res = document.querySelector("#search").value;
        res = res.toLocaleLowerCase();

        var arr = data.filter(function (ele) {
            var name = ele.name.toLocaleLowerCase();
            return name.includes(res);
        });
        createProduct(arr);
        document.querySelector("#qty").textContent= arr.length+" items";    
    }

</script>